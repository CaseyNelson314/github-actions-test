name: Arduino

on:
  - push
  - pull_request

jobs:

  compile:

    runs-on: ubuntu-latest

    strategy:
      matrix:
        board:

          - fqbn: arduino:avr:nano

          - fqbn: teensy:avr:teensy40
            platforms: |
              - name: teensy:avr
                source-url: https://www.pjrc.com/teensy/td_156/package_teensy_index.json

          - fqbn: rp2040:rp2040:rpipico
            platforms: |
              - name: rp2040:rp2040
                source-url: https://github.com/earlephilhower/arduino-pico/releases/download/global/package_rp2040_index.json

    steps:

      - uses: actions/checkout@v2

      - name: Compile sketch
        uses: arduino/compile-sketches@v1
        with:
          fqbn: ${{ matrix.board.fqbn }}
          platforms: ${{ matrix.board.platforms }}
          source-path: ./
          sketch-paths: ./test
          # libraries: |
          #   - name: FastLED
          #     source-path: https://github.com/FastLED/FastLED.git
