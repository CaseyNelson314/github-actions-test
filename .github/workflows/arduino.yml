name: Compile Arduino

on:
  - push
  - pull_request

jobs:

  build:

    runs-on: ubuntu-latest

    strategy:
      matrix:
        board:
          - fqbn: rp2040:rp2040:rpipico
            platforms: |
              - name: rp2040:rp2040
                source-url: https://github.com/earlephilhower/arduino-pico/releases/download/global/package_rp2040_index.json
          - fqbn: arduino:avr:nano

    steps:
      - uses: actions/checkout@v2
      - name: compile sketch
        uses: arduino/compile-sketches@v1
        with:
          fqbn: ${{ matrix.board.fqbn }}
          platforms: ${{ matrix.board.platforms }}
          sketch-paths: - ./test
          libraries: '-'
